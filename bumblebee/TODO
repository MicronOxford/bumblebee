$Id$

masquerade => cookie

check for noise in error logs

calendar zoom view < and > butons

use redirect header to react to override action= 


cookies for auth (function setcookie)
remove all "buttons"
use links (using PATHINFO?) for non form submit actions
if(isset($PATH_INFO)) {
     $viewcode = explode('/', $PATH_INFO);
       $num = count($viewcode);
       if($num % 2 == 0) {
           $viewcode[] = '';
           $num++;
       }
       for($i = 1; $i < $num; $i += 2) {

           $$viewcode[$i] = $viewcode[$i+1];

         }
   }

$arr = explode('/', $PATH_INFO);
$_SERVER['PATH_INFO']
list($first, $last) = explode('/', substr($PATH_INFO,1));

locking on making bookings
locking of records while editing?

permit deletion of instrument classes

allow user to change password

escape SQL input for bad characters. esp '. (magic_quotes_gpc solves this?)
escape HTML in output?
  echo "<a href='" . htmlspecialchars("/nextpage.php?stage=23&data=" .
          urlencode($data)) . "'>\n";
      echo "<textarea name='mydata'>\n";
      echo htmlspecialchars($data)."\n";
      echo "</textarea>";

streamline creation of project with only one group
streamline creation of project when creating a user
(projects: create new as option and if set to create new then make one and send the projectid to "edit project")

work out confirmation emails and when adminconfirm is necessary

create flag for compulsory emails for some events (e.g. booking Raman)

select all/deselect all javascript buttons where applicable

* unbook emails

*** decide on precision with which times can be entered, change time format?
*** handle halfday (allow_halfday field??)
*** half/full day calculation.

include consumables and output templating in reporting

billing analysis clean-up procedure... offer each of select groups, projects and users but only where applicable for the billing format in question

clean up user interface

allow templating/skinning of all user interface setup

globally change groups to accounts or bills or something?

* who has used what instruments on what days
* who per month

delete references to groups, projects in billing info, userprojects etc
-- should there be checks for this? cannot delete things if used elsewhere?


show log entries / instrument usage summary


Billing SQL notes:

for billing analysis, write a smart parser that scans the template for keys to write the SQL. May need to do some clever parsing too.

reporting: 
subqueries for "FROM" don't work with current version of MySQL (4.0)
TIMEDIFF and SUBTIME don't work with current MySQL.
maybe use a CREATE...SELECT statement into a temporary table. (how?)
CEIL(x) or CEILING(x) can be used to round up to nearest integer for num hours

Can existing (huge!) expression be used with just variable SELECT (or just select everything?) ORDER BY and GROUP BY clauses.

